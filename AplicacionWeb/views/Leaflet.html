<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Prueba de Leaflet</title>
  </head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>
  <body>
    <h2>Ejemplo con Leaflet</h2>
    <br>
    <div id="mapid" style="width: 1080px; height: 840px; position: relative;"></div>
  </body>

  <script type="text/javascript">
    var mymap = L.map('mapid').setView([19.425445, -99.178484], 13);
  	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
  		maxZoom: 20,
  		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
  			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
  			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  		id: 'mapbox/streets-v11',
  		tileSize: 512,
  		zoomOffset: -1
  	}).addTo(mymap);

    // Se agrega el marcador
    var marker = L.marker([19.425445, -99.178484]).addTo(mymap);

    // Se agrega un círculo con centro en GD y radio de 100 metros
    var circle = L.circle([19.425445, -99.178484], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.4,
        radius: 100
    }).addTo(mymap);

    // Se agregan pop-ups
    marker.bindPopup("<b>Buenas!</b><br>¡Mira! Es un Pop-Up.");
    circle.bindPopup("Ya viste? Soy un círculo.");

    // Se pueden mostrar mensajes en pantalla sin usar geomtrías
    var popup = L.popup()
                .setLatLng([19.46, -99.125])
                .setContent("Mensaje en forma de Pop-Up")
                .openOn(mymap);

    // Se pudenen mostrar alertas si se hace click en el mapa
    // function onMapClick(e) {
    //   alert("Hiciste clic en: " + e.latlng);
    // }
    // mymap.on('click', onMapClick);
    // Se pudenen mostrar Pop-Ups si se hace click en el mapa
    var popup2 = L.popup();

    function onMapClick(e) {
        popup2
            .setLatLng(e.latlng)
            .setContent("Hiciste clic en: " + e.latlng.toString())
            .openOn(mymap);
    }

    mymap.on('click', onMapClick);

    /* Ahora se prueba con GeoJSON */
    // Se define el GeoJSON (Recordar que GeoJSON usa Lat,Long)
    var geojsonFeature = {
      "type": "Feature",
      "properties": {
        "name": "Coors Field",
        "amenity": "Baseball Stadium",
        "popupContent": "This is where the Rockies play!"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-99.16,19.425]
      }
    };
    // Se agrega al mapa el GeoJSON
    L.geoJSON(geojsonFeature).addTo(mymap);

    // También se pueden usar arreglos de GeoJSON
    var myLines = [{
      "type": "LineString",
      "coordinates": [[-99.15,19.425], [-99.165,19.425], [-99.17,19.425]]
    }, {
      "type": "LineString",
      "coordinates": [[-99.15,19.42], [-99.165,19.43], [-99.17,19.435]]
    }];

    var myLayer = L.geoJSON().addTo(mymap);
    myLayer.addData(myLines);


    var states = [{
          "type": "Feature",
          "properties": {"party": "Republican"},
          "geometry": {
              "type": "Polygon",
              "coordinates": [[
                  [-104.05, 48.99],
                  [-97.22,  48.98],
                  [-96.58,  45.94],
                  [-104.03, 45.94],
                  [-104.05, 48.99]
              ]]
          }
      }, {
          "type": "Feature",
          "properties": {"party": "Democrat"},
          "geometry": {
              "type": "Polygon",
              "coordinates": [[
                  [-109.05, 41.00],
                  [-102.06, 40.99],
                  [-102.03, 36.99],
                  [-109.04, 36.99],
                  [-109.05, 41.00]
              ]]
          }
      }, {
        "type":"Polygon","coordinates":[[[-98.96395382420965,19.08911937116207],[-99.01780066606783,19.08643219688838],[-99.04281205862961,19.05780345316677],[-99.13086870013038,19.095527249383082],[-99.22905392110158,19.109221503169863],[-99.28507117419531,19.142449449082847],[-99.30672359891489,19.16849437131819],[-99.3328718739378,19.297685451922064],[-99.30925574355766,19.362591051036134],[-99.25969804642766,19.36088572779414],[-99.17541378481828,19.481550198482893],[-99.15494991670525,19.539582831382518],[-99.12373735239689,19.571053779008622],[-99.03872962127494,19.42728994457522],[-99.04508582175325,19.36310781497363],[-98.99005042238905,19.33654612880079],[-98.95873450439385,19.26135691968608],[-98.96643429200898,19.201205553293647],[-98.94219804580312,19.121365465144095],[-98.96395382420965,19.08911937116207]]]
      }, {
        "type":"GeometryCollection",
        "geometries":[
          {
            "type":"Point",
            "coordinates":[4,6]},
          {
            "type":"LineString",
            "coordinates":[[4,6],[7,10]]
          }
        ]
      }

      ];

      L.geoJSON(states, {
          style: function(feature) {
              switch (feature.properties.party) {
                  case 'Republican': return {color: "#ff0000"};
                  case 'Democrat':   return {color: "#0000ff"};
              }
          }
      }).addTo(mymap);


      var geojsonMarkerOptions = {
          radius: 8,
          fillColor: "#ff7800",
          color: "#000",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
      };

      L.geoJSON(someGeojsonFeature, {
          pointToLayer: function (feature, latlng) {
              return L.circleMarker(latlng, geojsonMarkerOptions);
          }
      }).addTo(mymap);



  </script>

</html>
